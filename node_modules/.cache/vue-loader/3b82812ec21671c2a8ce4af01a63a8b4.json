{"remainingRequest":"/home/paulo/eclipse-workspace/sisevent-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/paulo/eclipse-workspace/sisevent-front/src/components/Customer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/paulo/eclipse-workspace/sisevent-front/src/components/Customer.vue","mtime":1562914398000},{"path":"/home/paulo/eclipse-workspace/sisevent-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/paulo/eclipse-workspace/sisevent-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/paulo/eclipse-workspace/sisevent-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/paulo/eclipse-workspace/sisevent-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport http from \"../http-common\";\nimport { watch } from 'fs';\n \nexport default {\n  name: \"customer\",\n  props: [\"customer\"],\n  data() {\n\t  // newcustomer não é visualizado fora de data()\n    return {\n\t  messagelocal:'',\n\t  submittedAddress: false,\n\t  newcustomer: { \n\t\t  id: 0,\n\t\t  name: \"\",\n\t\t  age: 0,\n\t\t  address: {\n\t\t\t  street: \"\",\n\t\t      placenumber: 0,\n\t\t  \t  postalcode: 0\n\t\t  }\n\t  },\n\t  address: {\n\t\t  street: \"\",\n\t\t  placenumber: 0,\n\t\t  postalcode: 0\n\t  },\n    };\n  },\n  \n  methods: {\n\t/* eslint-disable no-console */\n\tsetMessage (event) {\n      this.messagelocal = event.target.value;\n      this.$emit('messageChanged', this.messagelocal)\n    },\n  \n    updateActive(status) {\n      var data = {\n        id: this.customer.id,\n        name: this.customer.name,\n        age: this.customer.age,\n\t\tactive: status,\n\t\taddress: this.customer.address\n      };\n \n      http\n        .put(\"/customer/\" + this.customer.id, data)\n        .then(response => {\n\t\t  this.customer.active = response.data.active;\n          console.log(response.data);\n        })\n        .catch(e => {\n          console.log(e);\n        });\n\t},\n    deleteCustomer() {\n      http\n        .delete(\"/customer/\" + this.customer.id)\n        .then(response => {\n          console.log(response.data);\n          this.$emit(\"refreshData\");\n\t\t  this.mensagem = \"Usuario deletado!\";\n\t\t  console.log(this.mensagem); \n\t\t  this.$router.push({name: 'customers', params: { message:this.mensagem }});\n        })\n        .catch(e => {\n          console.log(e);\n        });\n\t},\n    addAddress() {\t\n\tthis.newcustomer.address = { ...this.address };\n\t\n\tvar data = {...this.newcustomer};\n\t  console.log(data);\n\t\n      http\n        .post(\"/address\", data)\n        .then(response => {\n\t\t  this.mensagem = \"Endereço cadastrado!\";\n\t\t  console.log(this.mensagem); \n\t\t  this.$router.push({name: 'customers', params: { message:this.mensagem }});\n\t\t  console.log(response.data);\n\t   })\n        .catch(e => {\n          console.log(e);\n        });\n\t  this.submittedAddress = true;\n    },\n    newAddress() {\n      this.submittedAddress = false;\n\t  this.customer = {};\n    }\n    /* eslint-enable no-console */\n  },\n  mounted(){\n\t  this.newcustomer = { ...this.customer };\n  },\n  watch : {\n\t  customer (newvalue, oldvalue) {\n\t\tconsole.log(\"alterou customer:\")\n\t  \tconsole.log(newvalue);\n\t\tconsole.log(oldvalue);\n\t\tthis.newcustomer = { ...this.customer };\t\t  \n\t  }\n  }\n};\n",{"version":3,"sources":["Customer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Customer.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div class=\"list\"> \n  <div v-if=\"this.customer\">\n    <h4>Cliente</h4>\n    <div>\n      <label>Nome: </label> {{this.customer.name}}\n    </div>\n    <div>\n      <label>Idade: </label> {{this.customer.age}}\n    </div>\n    <div>\n      <label>Ativo: </label> {{this.customer.active}}\n    </div>  \n    <button v-if=\"this.customer.active\"\n      v-on:click=\"updateActive(false)\"\n      class=\"button btn-primary\">Inactive</button>\n    <button v-else\n      v-on:click=\"updateActive(true)\"\n      class=\"button btn-primary\">Active</button>\n    <button class=\"button btn-danger\" v-on:click=\"deleteCustomer()\">Delete</button>\n\t<p></p>\n\t\t\t<div class=\"submitform\">\n\t\t\t\t<div v-if=\"customer.address != null\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label for=\"name\">Rua</label>\n\t\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"street\" required v-model.trim=\"customer.address.street\" name=\"street\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label for=\"age\">Numero</label>\n\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"placenumber\" required v-model.trim=\"customer.address.placenumber\" name=\"placenumber\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label for=\"age\">Codigo postal</label>\n\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"postalcode\" required v-model.trim=\"customer.address.postalcode\" name=\"postalcode\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<button v-on:click=\"addAddress\" class=\"btn btn-success\">Salvar</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-else>\n\t\t\t\t<h4> Cadastrar Endereço:</h4>\n\t\t\t\t\t<div class=\"submitform\">\n\t\t\t\t\t<div v-if=\"!submittedAddress\">\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"name\">Rua</label>\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"street\" v-model=\"address.street\" required name=\"street\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"age\">Numero</label>\n\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"placenumber\" v-model=\"address.placenumber\" required name=\"placenumber\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"age\">Código postal</label>\n\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"postalcode\" v-model=\"address.postalcode\" required name=\"postalcode\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button v-on:click=\"addAddress\" class=\"btn btn-success\">Salvar</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else>\n\t\t\t\t\t<h4> Nenhum endereço!</h4>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n  \t\t\n  </div>\n  <div v-else>\n    <br/>\n    <p>Selecione um cliente...</p>\n  </div>\n</div>\n</template>\n \n<script>\nimport http from \"../http-common\";\nimport { watch } from 'fs';\n \nexport default {\n  name: \"customer\",\n  props: [\"customer\"],\n  data() {\n\t  // newcustomer não é visualizado fora de data()\n    return {\n\t  messagelocal:'',\n\t  submittedAddress: false,\n\t  newcustomer: { \n\t\t  id: 0,\n\t\t  name: \"\",\n\t\t  age: 0,\n\t\t  address: {\n\t\t\t  street: \"\",\n\t\t      placenumber: 0,\n\t\t  \t  postalcode: 0\n\t\t  }\n\t  },\n\t  address: {\n\t\t  street: \"\",\n\t\t  placenumber: 0,\n\t\t  postalcode: 0\n\t  },\n    };\n  },\n  \n  methods: {\n\t/* eslint-disable no-console */\n\tsetMessage (event) {\n      this.messagelocal = event.target.value;\n      this.$emit('messageChanged', this.messagelocal)\n    },\n  \n    updateActive(status) {\n      var data = {\n        id: this.customer.id,\n        name: this.customer.name,\n        age: this.customer.age,\n\t\tactive: status,\n\t\taddress: this.customer.address\n      };\n \n      http\n        .put(\"/customer/\" + this.customer.id, data)\n        .then(response => {\n\t\t  this.customer.active = response.data.active;\n          console.log(response.data);\n        })\n        .catch(e => {\n          console.log(e);\n        });\n\t},\n    deleteCustomer() {\n      http\n        .delete(\"/customer/\" + this.customer.id)\n        .then(response => {\n          console.log(response.data);\n          this.$emit(\"refreshData\");\n\t\t  this.mensagem = \"Usuario deletado!\";\n\t\t  console.log(this.mensagem); \n\t\t  this.$router.push({name: 'customers', params: { message:this.mensagem }});\n        })\n        .catch(e => {\n          console.log(e);\n        });\n\t},\n    addAddress() {\t\n\tthis.newcustomer.address = { ...this.address };\n\t\n\tvar data = {...this.newcustomer};\n\t  console.log(data);\n\t\n      http\n        .post(\"/address\", data)\n        .then(response => {\n\t\t  this.mensagem = \"Endereço cadastrado!\";\n\t\t  console.log(this.mensagem); \n\t\t  this.$router.push({name: 'customers', params: { message:this.mensagem }});\n\t\t  console.log(response.data);\n\t   })\n        .catch(e => {\n          console.log(e);\n        });\n\t  this.submittedAddress = true;\n    },\n    newAddress() {\n      this.submittedAddress = false;\n\t  this.customer = {};\n    }\n    /* eslint-enable no-console */\n  },\n  mounted(){\n\t  this.newcustomer = { ...this.customer };\n  },\n  watch : {\n\t  customer (newvalue, oldvalue) {\n\t\tconsole.log(\"alterou customer:\")\n\t  \tconsole.log(newvalue);\n\t\tconsole.log(oldvalue);\n\t\tthis.newcustomer = { ...this.customer };\t\t  \n\t  }\n  }\n};\n</script>"]}]}